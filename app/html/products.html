<section class="products">
	<div class="content-wrap prod">
		<div class="products__top">
			<div class="products__top-title">
				<h2>Продукция</h2>
			</div>
			<div class="products__top-color">
				<!-- <div class="color" id="showAll">Показать все</div> -->
				<div class="color" id="grey"></div>
				<div class="color" id="white"></div>
				<div class="color" id="black"></div>
			</div>
		</div>
		<div class="products__content">
			<div class="products__product active" data-color="white">
				<div class="products__product-img">
					<img src="img/lamp2.png" alt="product">
				</div>
				<div class="products__product-link">
					<h3>
						<a href="product.html">Relay based sensors</a>
					</h3>
					<a href="product.html">Продукт <span>&#160; &#62; </span></a>
				</div>
			</div>
			<div class="products__product active" data-color="grey">
				<div class="products__product-img">
					<img src="img/lamp2.png" alt="product">
				</div>
				<div class="products__product-link">
					<h3>
						<a href="product.html">Relay based sensors</a>
					</h3>
					<a href="product.html">Продукт <span>&#160; &#62; </span></a>
				</div>
			</div>
			<div class="products__product active" data-color="white">
				<div class="products__product-img">
					<img src="img/lamp2.png" alt="product">
				</div>
				<div class="products__product-link">
					<h3>
						<a href="product.html">Relay based sensors</a>
					</h3>
					<a href="product.html">Продукт <span>&#160; &#62; </span></a>
				</div>
			</div>
			<div class="products__product active" data-color="black">
				<div class="products__product-img">
					<img src="img/lamp2.png" alt="product">
				</div>
				<div class="products__product-link">
					<h3>
						<a href="product.html">Relay based sensors</a>
					</h3>
					<a href="product.html">Продукт <span>&#160; &#62; </span></a>
				</div>
			</div>
			<div class="products__product active" data-color="grey">
				<div class="products__product-img">
					<img src="img/lamp2.png" alt="product">
				</div>
				<div class="products__product-link">
					<h3>
						<a href="product.html">Relay based sensors</a>
					</h3>
					<a href="product.html">Продукт <span>&#160; &#62; </span></a>
				</div>
			</div>
		</div>
	</div>
</section>
<script>
	document.addEventListener('DOMContentLoaded', function() {
		// получение массива активных элементов
		function getElemetsByAttr(attr) {
			var arr = [];
			var elements = document.getElementsByTagName('*');
			for(var i = 0; i < elements.length; i++) {
				if(elements[i].hasAttribute(attr)) {
					arr.push(elements[i]);
				}
			}
			return arr;
		}

		// получение цвета при клике на кнопку
		var colorBtn = document.querySelectorAll('.color');
		for(var i = 0; i < colorBtn.length; i++) {
			colorBtn[i].onclick = function(event) {
			    if(this.className !== 'color activeAttr') {
                    this.classList.add('activeAttr');
                    toggleBlocks('data-color');
                }
                else {
                    this.classList.remove('activeAttr');
                    var bg = getElemetsByAttr('data-color');
                    for (var i = 0; i < bg.length; i++) {
                        bg[i].style.display = 'block';
                    }
                }
			};
		}

		// получение активных выбранных атрибутов, кнопки
		function getActiveAttr() {
			var arrActive = [];
			var active = document.getElementsByClassName('activeAttr');
			for(var i = 0; i < active.length; i++) {
				arrActive.push(active[i].id);
			}return arrActive;
		}

		// выбор из массива определённых цветов
		function in_array(what, where) {
		    for(var i = 0; i < where.length; i++)
		        if(what == where[i])
		            return true;
		    return false;
		}

		// включение/выключение блоков
		function toggleBlocks(attr) {
			var arrBlocks = getElemetsByAttr(attr);
			var activeAttrs = getActiveAttr();
			for ( var i = 0; i < arrBlocks.length; i++) {
				var dataAttr = arrBlocks[i].getAttribute(attr);
				if(in_array(dataAttr, activeAttrs)) {
					arrBlocks[i].style.display = 'block';
				}
				else {
					arrBlocks[i].style.display = 'none';
				}
			}
		}
});

</script>